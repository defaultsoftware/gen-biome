(()=>{"use strict";var e={607:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(994));class h{width;height;layers;data=[];seed=[];constructor(e){const{width:t,height:r,seed:a,layers:i=[]}=e;this.width=t,this.height=r,this.layers=i,this.seed=a||h.generateRandomSeed()}static generateRandomSeed(){const e=[];for(let t=0;t<o.DEFAULT_PERLIN_SIZE+1;t++)e.push(Math.random());return e}addLayer(e){this.layers.push(e)}clearLayers(){this.layers=[]}generate(){this.data=[];for(const e of this.layers){const t=this.generateLayer(e);for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)null!==t[e][r]&&(this.data[e]||(this.data[e]=[]),this.data[e][r]=t[e][r])}}getTilesMatrix(){if(0===this.data.length)throw Error("Map not generated. First use `generate()`");return this.data.map((e=>e.map((e=>e.tileIndex))))}getCollideMatrix(){if(0===this.data.length)throw Error("Map not generated. First use `generate()`");return this.data.map((e=>e.map((e=>e.collide?1:0))))}pickBiomeAt(e,t){if(0===this.data.length)throw Error("Map not generated. First use `generate()`");return this.data[t]?.[e]||null}getBiomes(){return this.layers.map((e=>e.biomes)).flat()}getSeed(){return this.seed}setSeed(e){this.seed=e}generateLayer(e){const{frequencyChange:t=10,sizeDifference:r=1.1,bordersPuriry:a=10}=e.parameters,i=Math.max(1,Math.min(64,t)),s=22-Math.max(2,Math.min(20,a)),n=Math.max(.1,Math.min(3,r)),h=[];for(let t=0;t<this.height;t++){h[t]=[];for(let r=0;r<this.width;r++){let a=(0,o.default)({seed:this.seed,octaves:s,x:r/this.width*i,y:t/this.height*i});a**=n;const l=e.biomes.find((({level:e})=>{const[t,r]=e;return(void 0===t||a>=t)&&(void 0===r||a<r)}));h[t][r]=l||null}}return h}}t.default=h,n(r(699),t)},994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PERLIN_SIZE=void 0,t.DEFAULT_PERLIN_SIZE=4095;function r(e){return.5*(1-Math.cos(e*Math.PI))}t.default=function(e){const{x:t,y:a,seed:i,octaves:s}=e,n=i.length-1;let o,h,l,d,u,c=Math.floor(t),f=Math.floor(a),p=t-c,g=a-f,y=0,_=.5;for(let e=0;e<s;e++){let e=c+(f<<4);o=r(p),h=r(g),l=i[e&n],l+=o*(i[e+1&n]-l),d=i[e+16&n],d+=o*(i[e+16+1&n]-d),l+=h*(d-l),e+=256,d=i[e&n],d+=o*(i[e+1&n]-d),u=i[e+16&n],u+=o*(i[e+16+1&n]-u),d+=h*(u-d),y+=l*_,_*=.5,c<<=1,p*=2,p>=1&&(c++,p--),f<<=1,g*=2,g>=1&&(f++,g--)}return y}},699:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})}},t={};var r=function r(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}(607);module.exports=r})();