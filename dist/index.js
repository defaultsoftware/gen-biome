(()=>{"use strict";var t={607:function(t,e,r){var a=this&&this.__createBinding||(Object.create?function(t,e,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,i)}:function(t,e,r,a){void 0===a&&(a=r),t[a]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&a(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||a(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});const n=o(r(994));class h{constructor(t){this.data=[],this.seed=[];const{width:e,height:r,seed:a,layers:i=[]}=t;this.layers=i,this.seed=a||h.generateRandomSeed(),this.width=e,this.height=r}static generateRandomSeed(){const t=[];for(let e=0;e<n.DEFAULT_PERLIN_SIZE+1;e++)t.push(Math.random());return t}addLayer(t){this.layers.push(t)}clearLayers(){this.layers=[]}generate(){this.data=[];for(const t of this.layers){const e=this.generateLayer(t);for(let t=0;t<e.length;t++){this.data[t]||(this.data[t]=[]);for(let r=0;r<e[t].length;r++)this.data[t][r]=e[t][r].data}}}getMatrix(){return this.data}getAt(t,e){var r;return null===(r=this.data[e])||void 0===r?void 0:r[t]}setAt(t,e,r){var a;(null===(a=this.data[e])||void 0===a?void 0:a[t])&&(this.data[e][t]=r)}getSeed(){return this.seed}setSeed(t){this.seed=t}generateLayer(t){const{frequencyChange:e=10,sizeDifference:r=1.1,bordersPurity:a=10}=t.parameters,i=Math.max(1,Math.min(64,e)),o=22-Math.max(2,Math.min(20,a)),s=Math.max(.1,Math.min(3,r)),h=[];for(let e=0;e<this.height;e++){h[e]=[];for(let r=0;r<this.width;r++){let a=(0,n.default)({seed:this.seed,octaves:o,x:r/this.width*i,y:e/this.height*i});a=Math.pow(a,s);const d=t.biomes.find((({breakpoint:t})=>(void 0===t.min||a>=t.min)&&(void 0===t.max||a<t.max)));if(!d)throw Error(`Undefined biome for position [${r}, ${e}]`);h[e][r]=d}}return h}}e.default=h,s(r(699),e)},994:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_PERLIN_SIZE=void 0,e.DEFAULT_PERLIN_SIZE=4095;const r=4,a=1<<r,i=256,o=.5;function s(t){return.5*(1-Math.cos(t*Math.PI))}e.default=function(t){const{x:e,y:n,seed:h,octaves:d}=t,l=h.length-1;let u,c,f,p,v,_=Math.floor(e),y=Math.floor(n),g=e-_,m=n-y,M=0,b=.5;for(let t=0;t<d;t++){let t=_+(y<<r);u=s(g),c=s(m),f=h[t&l],f+=u*(h[t+1&l]-f),p=h[t+a&l],p+=u*(h[t+a+1&l]-p),f+=c*(p-f),t+=i,p=h[t&l],p+=u*(h[t+1&l]-p),v=h[t+a&l],v+=u*(h[t+a+1&l]-v),p+=c*(v-p),M+=f*b,b*=o,_<<=1,g*=2,g>=1&&(_++,g--),y<<=1,m*=2,m>=1&&(y++,m--)}return M}},699:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})}},e={};var r=function r(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,r),o.exports}(607);module.exports=r})();