(()=>{"use strict";var e={465:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(771),t),o(r(535),t),o(r(309),t)},309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,r=[0,1]){return Math.max(r[0],Math.min(r[1],null!=e?e:t))}},650:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateNoise=t.generateSeed=void 0;const r=4095,i=4,o=1<<i,n=256,s=.5,a=1.1;function h(e){return.5*(1-Math.cos(e*Math.PI))}function l(e,t,r){const i=t/2,o=Math.abs(i-e),n=i*(1-r);if(o<n)return 1;let s=(o-n)/i/(1-n/i);return s=Math.min(1,Math.max(0,s)),1-function(e){return 3*Math.pow(e,2)-2*Math.pow(e,3)}(s)}t.generateSeed=function(){const e=[];for(let t=0;t<r+1;t++)e.push(Math.random());return e},t.generateNoise=function(e){const{x:t,y:r,width:u,height:d,seed:c,frequency:f,redistribution:g,octaves:p,averaging:v,falloff:m}=e,y=c.length-1,b=t/u*f,M=r/d*f;let w,x,_,B,O,P=Math.floor(b),j=Math.floor(M),W=b-P,L=M-j,q=0,S=.5;for(let e=0;e<p;e++){let e=P+(j<<i);w=h(W),x=h(L),_=c[e&y],_+=w*(c[e+1&y]-_),B=c[e+o&y],B+=w*(c[e+o+1&y]-B),_+=x*(B-_),e+=n,B=c[e&y],B+=w*(c[e+1&y]-B),O=c[e+o&y],O+=w*(c[e+o+1&y]-O),B+=x*(O-B),q+=_*S,S*=s,P<<=1,W*=2,W>=1&&(P++,W--),j<<=1,L*=2,L>=1&&(j++,L--)}return v&&(q>.5?q=Math.pow(q,(1.5-q)/a):q<.5&&(q=Math.pow(q,(1.5-q)*a))),q=Math.pow(q,g),m&&(q*=l(t,u,m)*l(r,d,m)),q}},910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldBiome=void 0;t.WorldBiome=class{constructor(e,t){var r,i;this.lowerBound=Math.max(0,null!==(r=e.lowerBound)&&void 0!==r?r:0),this.upperBound=Math.min(1,null!==(i=e.upperBound)&&void 0!==i?i:1),this.data=t}}},771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldGenerator=void 0;const i=r(650),o=r(535),n=r(481);t.WorldGenerator=class{constructor(e){this.layers=[],this.width=e.width,this.height=e.height}addLayer(e={}){const t=new n.WorldLayer(e);return this.layers.push(t),t}clearLayers(){this.layers=[]}getLayers(){return this.layers}generate(e){const t=null!=e?e:(0,i.generateSeed)(),r=[];for(const e of this.layers){const i=this.generateLayer(e,t);for(let e=0;e<this.height;e++){r[e]||(r[e]=[]);for(let t=0;t<this.width;t++)i[e][t]&&(r[e][t]=i[e][t].data)}}for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)if(void 0===r[e][t])throw Error(`World matrix contains empty biome at [${t},${e}]`);return new o.World(r,t)}generateLayer(e,t){const r=e.getGenerationParams(),o=[];for(let n=0;n<this.height;n++){o[n]=[];for(let s=0;s<this.width;s++){const a=(0,i.generateNoise)(Object.assign(Object.assign({},r),{seed:t,width:this.width,height:this.height,x:s,y:n})),h=e.getBiomeByHeight(a);h&&(o[n][s]=h)}}return o}}},481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldLayer=void 0;const i=r(24),o=r(910);t.WorldLayer=class{constructor(e={}){var t;this.biomes=[],this.frequency=Math.round(31*(0,i.clamp)(e.frequencyChange,.3)+1),this.octaves=Math.round(14*(1-(0,i.clamp)(e.borderSmoothness,.5))+1),this.redistribution=2-(0,i.clamp)(e.heightRedistribution,1,[.5,1.5]),this.falloff=(0,i.clamp)(e.falloff,0,[0,.9]),this.averaging=null===(t=e.heightAveraging)||void 0===t||t}addBiome(e,t){const r=new o.WorldBiome(e,t);return this.biomes.push(r),r}clearBiomes(){this.biomes=[]}getBiomes(){return this.biomes}getBiomeByHeight(e){return this.getBiomes().find((t=>e>=t.lowerBound&&e<=t.upperBound))}getGenerationParams(){return{frequency:this.frequency,octaves:this.octaves,redistribution:this.redistribution,averaging:this.averaging,falloff:this.falloff}}}},535:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;t.World=class{constructor(e,t){this.matrix=[],this.width=e[0].length,this.height=e.length,this.matrix=e,this.seed=t}getMatrix(){return this.matrix}each(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++){if(!1===e({x:r,y:t},this.matrix[t][r]))return}}getAt(e){var t,r;return null!==(r=null===(t=this.matrix[e.y])||void 0===t?void 0:t[e.x])&&void 0!==r?r:null}replaceAt(e,t){if(e.y>=this.height||e.x>=this.width)throw Error(`Position [${e.x},${e.y}] is out of world bounds`);this.matrix[e.y][e.x]=t}}}},t={};var r=function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}(465);module.exports=r})();