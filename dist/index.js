(()=>{"use strict";var e={465:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,o)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(771),t),o(r(535),t),o(r(309),t)},309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,r=[0,1]){return Math.max(r[0],Math.min(r[1],null!=e?e:t))}},650:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateNoise=t.generateSeed=void 0;const r=4095,i=4,o=1<<i,s=256,n=.5,a=1.1;function h(e){return.5*(1-Math.cos(e*Math.PI))}t.generateSeed=function(){const e=[];for(let t=0;t<r+1;t++)e.push(Math.random());return e},t.generateNoise=function(e){let{x:t,y:r}=e;const{seed:d,frequency:l,redistribution:u,octaves:c,averaging:g}=e,f=d.length-1;t*=l,r*=l;let y,p,v,m,b,w=Math.floor(t),x=Math.floor(r),M=t-w,_=r-x,B=0,O=.5;for(let e=0;e<c;e++){let e=w+(x<<i);y=h(M),p=h(_),v=d[e&f],v+=y*(d[e+1&f]-v),m=d[e+o&f],m+=y*(d[e+o+1&f]-m),v+=p*(m-v),e+=s,m=d[e&f],m+=y*(d[e+1&f]-m),b=d[e+o&f],b+=y*(d[e+o+1&f]-b),m+=p*(b-m),B+=v*O,O*=n,w<<=1,M*=2,M>=1&&(w++,M--),x<<=1,_*=2,_>=1&&(x++,_--)}return g&&(B>.5?B=Math.pow(B,(1.5-B)/a):B<.5&&(B=Math.pow(B,(1.5-B)*a))),B=Math.pow(B,u),B}},910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldBiome=void 0;t.WorldBiome=class{constructor(e,t){var r,i;this.lowerBound=Math.max(0,null!==(r=e.lowerBound)&&void 0!==r?r:0),this.upperBound=Math.min(1,null!==(i=e.upperBound)&&void 0!==i?i:1),this.data=t}}},771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldGenerator=void 0;const i=r(650),o=r(535),s=r(481);t.WorldGenerator=class{constructor(e){this.layers=[],this.width=e.width,this.height=e.height}addLayer(e={}){const t=new s.WorldLayer(e);return this.layers.push(t),t}clearLayers(){this.layers=[]}getLayers(){return this.layers}generate(e){const t=null!=e?e:(0,i.generateSeed)(),r=[];for(const e of this.layers){const i=this.generateLayer(e,t);for(let e=0;e<this.height;e++){r[e]||(r[e]=[]);for(let t=0;t<this.width;t++)i[e][t]&&(r[e][t]=i[e][t].data)}}for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)if(void 0===r[e][t])throw Error(`World matrix contains empty biome at [${t},${e}]`);return new o.World(r,t)}generateLayer(e,t){const r=e.getGenerationParams(),o=[];for(let s=0;s<this.height;s++){o[s]=[];for(let n=0;n<this.width;n++){const a=(0,i.generateNoise)(Object.assign(Object.assign({},r),{seed:t,x:n/this.width,y:s/this.height})),h=e.getBiomeByHeight(a);h&&(o[s][n]=h)}}return o}}},481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldLayer=void 0;const i=r(24),o=r(910);t.WorldLayer=class{constructor(e={}){var t;this.biomes=[],this.frequency=Math.round(31*(0,i.clamp)(e.frequencyChange,.3)+1),this.octaves=Math.round(14*(1-(0,i.clamp)(e.borderSmoothness,.5))+1),this.redistribution=2-(0,i.clamp)(e.heightRedistribution,1,[.5,1.5]),this.averaging=null===(t=e.heightAveraging)||void 0===t||t}addBiome(e,t){const r=new o.WorldBiome(e,t);return this.biomes.push(r),r}clearBiomes(){this.biomes=[]}getBiomes(){return this.biomes}getBiomeByHeight(e){return this.getBiomes().find((t=>e>=t.lowerBound&&e<=t.upperBound))}getGenerationParams(){return{frequency:this.frequency,octaves:this.octaves,redistribution:this.redistribution,averaging:this.averaging}}}},535:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;t.World=class{constructor(e,t){this.matrix=[],this.width=e[0].length,this.height=e.length,this.matrix=e,this.seed=t}getMatrix(){return this.matrix}each(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++){if(!1===e({x:r,y:t},this.matrix[t][r]))return}}getAt(e){if(e.y>=this.height||e.x>=this.width)throw Error(`Position [${e.x},${e.y}] is out of world bounds`);return this.matrix[e.y][e.x]}replaceAt(e,t){if(e.y>=this.height||e.x>=this.width)throw Error(`Position [${e.x},${e.y}] is out of world bounds`);this.matrix[e.y][e.x]=t}}}},t={};var r=function r(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}(465);module.exports=r})();