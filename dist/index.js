(()=>{"use strict";var e={997:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldGenerator=void 0;const i=o(871),r=o(9),n=o(128),s=o(6);t.WorldGenerator=class{constructor(e){this.biomes=[],this.config=e}addBiome(e,t){const o=new s.WorldBiome(e,t);return this.biomes.push(o),o}clearBiomes(){this.biomes=[]}getBiomes(){return this.biomes}peakBiome(e){var t;return null!==(t=this.getBiomes().find((t=>e>=t.lowerBound&&e<=t.upperBound)))&&void 0!==t?t:null}generate(e){var t,o,s;const l=null!==(t=null==e?void 0:e.seed)&&void 0!==t?t:r.Seed.generate(null==e?void 0:e.seedSize),a=[];for(let t=0;t<this.config.height;t++){a[t]=[];for(let r=0;r<this.config.width;r++){const n=i.Perlin.generate({config:this.config,seed:l,x:r+(null!==(o=null==e?void 0:e.offsetX)&&void 0!==o?o:0),y:t+(null!==(s=null==e?void 0:e.offsetY)&&void 0!==s?s:0)}),h=this.peakBiome(n);h&&(a[t][r]=h.data)}}return new n.World(a,l)}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},465:function(e,t,o){var i=this&&this.__createBinding||(Object.create?function(e,t,o,i){void 0===i&&(i=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,i,r)}:function(e,t,o,i){void 0===i&&(i=o),e[i]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||i(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(997),t),r(o(147),t),r(o(128),t),r(o(383),t),r(o(6),t),r(o(346),t),r(o(871),t),r(o(9),t)},708:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERLIN_AVG_POWER=t.PERLIN_AMP_FALLOFF=t.PERLIN_ZWRAP=t.PERLIN_ZWRAPB=t.PERLIN_YWRAP=t.PERLIN_YWRAPB=void 0,t.PERLIN_YWRAPB=4,t.PERLIN_YWRAP=1<<t.PERLIN_YWRAPB,t.PERLIN_ZWRAPB=8,t.PERLIN_ZWRAP=1<<t.PERLIN_ZWRAPB,t.PERLIN_AMP_FALLOFF=.5,t.PERLIN_AVG_POWER=1.1},871:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Perlin=void 0;const i=o(708);t.Perlin=class{static generate({x:e,y:t,seed:o,config:r}){const{frequencyChange:n,borderSmoothness:s,heightAveraging:l,heightRedistribution:a,falloff:h}=this.normalizeConfig(r),d=o.length-1,u=e/r.width*n,c=t/r.height*n;let f=Math.floor(u),P=Math.floor(c),_=u-f,g=c-P,v=0,p=.5;for(let e=0;e<s;e++){let e=f+(P<<i.PERLIN_YWRAPB);const t=this.scaledCosine(_),r=this.scaledCosine(g);let n=o[e&d];n+=t*(o[e+1&d]-n);let s=o[e+i.PERLIN_YWRAP&d];s+=t*(o[e+i.PERLIN_YWRAP+1&d]-s),n+=r*(s-n),v+=n*p,p*=i.PERLIN_AMP_FALLOFF,e+=i.PERLIN_ZWRAP,f<<=1,_*=2,_>=1&&(f++,_--),P<<=1,g*=2,g>=1&&(P++,g--)}return l&&(v>.5?v=Math.pow(v,(1.5-v)/i.PERLIN_AVG_POWER):v<.5&&(v=Math.pow(v,(1.5-v)*i.PERLIN_AVG_POWER))),v=Math.pow(v,a),h>0&&(v*=this.heightFalloff(e,r.width,h)*this.heightFalloff(t,r.height,h)),v}static clamp(e,t,o=[0,1]){return Math.max(o[0],Math.min(o[1],null!=e?e:t))}static scaledCosine(e){return.5*(1-Math.cos(e*Math.PI))}static smootherStep(e){return 3*Math.pow(e,2)-2*Math.pow(e,3)}static heightFalloff(e,t,o){const i=t/2,r=Math.abs(i-e),n=i*(1-o);if(r<n)return 1;let s=(r-n)/i/(1-n/i);return s=Math.min(1,Math.max(0,s)),1-this.smootherStep(s)}static normalizeConfig(e){var t;return{frequencyChange:Math.round(31*this.clamp(e.frequencyChange,.3)+1),borderSmoothness:Math.round(14*(1-this.clamp(e.borderSmoothness,.5))+1),heightRedistribution:2-this.clamp(e.heightRedistribution,1,[.5,1.5]),falloff:this.clamp(e.falloff,0,[0,.9]),heightAveraging:null===(t=e.heightAveraging)||void 0===t||t}}}},9:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Seed=void 0,t.Seed=class{static generate(e=512){const t=[];for(let o=0;o<e;o++)t.push(Math.random());return t}}},6:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldBiome=void 0,t.WorldBiome=class{constructor(e,t){var o,i;this.lowerBound=Math.max(0,null!==(o=e.lowerBound)&&void 0!==o?o:0),this.upperBound=Math.min(1,null!==(i=e.upperBound)&&void 0!==i?i:1),this.data=t}}},346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0,t.World=class{constructor(e,t){this.matrix=[],this.width=e[0].length,this.height=e.length,this.matrix=e,this.seed=t}getMatrix(){return this.matrix}each(e){for(let t=0;t<this.height;t++)for(let o=0;o<this.width;o++)if(!1===e({x:o,y:t},this.matrix[t][o]))return}getAt(e){var t,o;return null!==(o=null===(t=this.matrix[e.y])||void 0===t?void 0:t[e.x])&&void 0!==o?o:null}replaceAt(e,t){this.matrix[e.y][e.x]=t}}},383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})}},t={},o=function o(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,o),n.exports}(465);module.exports=o})();