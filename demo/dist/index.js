/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={"./demo/src/biomes.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BIOMES=void 0,t.BIOMES=[{params:{lowerBound:0,upperBound:.2},data:{name:"WATER",color:"dodgerblue"}},{params:{lowerBound:.2,upperBound:.3},data:{name:"SAND",color:"#edd665"}},{params:{lowerBound:.3,upperBound:.7},data:{name:"GRASS",color:"#9bd138"}},{params:{lowerBound:.7,upperBound:.9},data:{name:"MOUNT",color:"gray"}},{params:{lowerBound:.9},data:{name:"SNOW",color:"white"}}]},"./demo/src/interface.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ui=void 0,t.ui={screen:document.getElementById("screen"),inputs:{resetSeed:document.querySelector("[name=resetSeed]"),frequencyChange:document.querySelector("[name=frequencyChange]"),borderSmoothness:document.querySelector("[name=borderSmoothness]"),heightRedistribution:document.querySelector("[name=heightRedistribution]"),worldWidth:document.querySelector("[name=worldWidth]"),worldHeight:document.querySelector("[name=worldHeight]")},buttons:{generate:document.getElementById("generate")}}},"./demo/src/render.ts":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderOnCanvas=void 0;const o=r("./demo/src/interface.ts"),i=o.ui.screen.getContext("2d"),n=2;t.renderOnCanvas=function(e){var t;o.ui.screen.width=e.width*n,o.ui.screen.height=e.height*n;for(let r=0;r<e.height;r++)for(let o=0;o<e.width;o++){const s=e.getAt({x:o,y:r});i.fillStyle=null!==(t=null==s?void 0:s.color)&&void 0!==t?t:"purple",i.fillRect(o*n,r*n,n,n)}}},"./src/index.ts":function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r("./src/world-generator.ts"),t),i(r("./src/world.ts"),t),i(r("./src/types.ts"),t)},"./src/types.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./src/utils/clamp.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,r=[0,1]){return Math.max(r[0],Math.min(r[1],null!=e?e:t))}},"./src/utils/perlin.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateNoise=t.generateSeed=void 0;const r=4095,o=4,i=1<<o,n=256,s=.5,d=1.1;function a(e){return.5*(1-Math.cos(e*Math.PI))}t.generateSeed=function(){const e=[];for(let t=0;t<r+1;t++)e.push(Math.random());return e},t.generateNoise=function(e){let{x:t,y:r}=e;const{seed:l,frequency:u,redistribution:c,octaves:h}=e,m=l.length-1;t*=u,r*=u;let p,v,g,f,y,b=Math.floor(t),w=Math.floor(r),B=t-b,M=r-w,_=0,O=.5;for(let e=0;e<h;e++){let e=b+(w<<o);p=a(B),v=a(M),g=l[e&m],g+=p*(l[e+1&m]-g),f=l[e+i&m],f+=p*(l[e+i+1&m]-f),g+=v*(f-g),e+=n,f=l[e&m],f+=p*(l[e+1&m]-f),y=l[e+i&m],y+=p*(l[e+i+1&m]-y),f+=v*(y-f),_+=g*O,O*=s,b<<=1,B*=2,B>=1&&(b++,B--),w<<=1,M*=2,M>=1&&(w++,M--)}return _>.5?_=Math.pow(_,(1.5-_)/d):_<.5&&(_=Math.pow(_,(1.5-_)*d)),_=Math.pow(_,c),_}},"./src/world-biome.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldBiome=void 0;t.WorldBiome=class{constructor(e,t){var r,o;this.lowerBound=Math.max(0,null!==(r=e.lowerBound)&&void 0!==r?r:0),this.upperBound=Math.min(1,null!==(o=e.upperBound)&&void 0!==o?o:1),this.data=t}}},"./src/world-generator.ts":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldGenerator=void 0;const o=r("./src/utils/perlin.ts"),i=r("./src/world.ts"),n=r("./src/world-layer.ts");t.WorldGenerator=class{constructor(e){this.layers=[],this.width=e.width,this.height=e.height}addLayer(e={}){const t=new n.WorldLayer(e);return this.layers.push(t),t}clearLayers(){this.layers=[]}getLayers(){return this.layers}generate(e){const t=null!=e?e:(0,o.generateSeed)(),r=[];for(const e of this.layers){const o=this.generateLayer(e,t);for(let e=0;e<this.height;e++){r[e]||(r[e]=[]);for(let t=0;t<this.width;t++)o[e][t]&&(r[e][t]=o[e][t].data)}}for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)if(void 0===r[e][t])throw Error(`World matrix contains empty biome at ${t},${e}`);return new i.World(r,t)}generateLayer(e,t){const r=e.getGenerationParams(),i=[];for(let n=0;n<this.height;n++){i[n]=[];for(let s=0;s<this.width;s++){const d=(0,o.generateNoise)(Object.assign(Object.assign({},r),{seed:t,x:s/this.width,y:n/this.height})),a=e.getBiomeByHeight(d);a&&(i[n][s]=a)}}return i}}},"./src/world-layer.ts":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldLayer=void 0;const o=r("./src/utils/clamp.ts"),i=r("./src/world-biome.ts");t.WorldLayer=class{constructor(e={}){this.biomes=[],this.frequency=Math.round(31*(0,o.clamp)(null==e?void 0:e.frequencyChange,.3)+1),this.octaves=Math.round(14*(1-(0,o.clamp)(null==e?void 0:e.borderSmoothness,.5))+1),this.redistribution=2-(0,o.clamp)(null==e?void 0:e.heightRedistribution,1,[.5,1.5])}addBiome(e,t){const r=new i.WorldBiome(e,t);return this.biomes.push(r),r}clearBiomes(){this.biomes=[]}getBiomes(){return this.biomes}getBiomeByHeight(e){return this.getBiomes().find((t=>e>=t.lowerBound&&e<=t.upperBound))}getGenerationParams(){return{frequency:this.frequency,octaves:this.octaves,redistribution:this.redistribution}}}},"./src/world.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;t.World=class{constructor(e,t){this.matrix=[],this.width=e[0].length,this.height=e.length,this.matrix=e,this.seed=t}getMatrix(){return this.matrix}getAt(e){var t;return null===(t=this.matrix[e.y])||void 0===t?void 0:t[e.x]}replaceAt(e,t){if(e.y>=this.height||e.x>=this.width)throw Error("Specified position is out of world bounds");this.matrix[e.y][e.x]=t}}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}var o={};(()=>{var e,t,i=o;Object.defineProperty(i,"__esModule",{value:!0});const n=r("./src/index.ts"),s=r("./demo/src/render.ts"),d=r("./demo/src/biomes.ts"),a=r("./demo/src/interface.ts");let l;null===(e=a.ui.buttons.generate)||void 0===e||e.addEventListener("click",(()=>{var e,t,r,o,i,u;const c=new n.WorldGenerator({width:Number(null===(e=a.ui.inputs.worldWidth)||void 0===e?void 0:e.value),height:Number(null===(t=a.ui.inputs.worldHeight)||void 0===t?void 0:t.value)}),h=c.addLayer({frequencyChange:Number(null===(r=a.ui.inputs.frequencyChange)||void 0===r?void 0:r.value),borderSmoothness:Number(null===(o=a.ui.inputs.borderSmoothness)||void 0===o?void 0:o.value),heightRedistribution:Number(null===(i=a.ui.inputs.heightRedistribution)||void 0===i?void 0:i.value)});for(const{params:e,data:t}of d.BIOMES)h.addBiome(e,t);const m=(null===(u=a.ui.inputs.resetSeed)||void 0===u?void 0:u.checked)?void 0:l,p=c.generate(m);l=p.seed,(0,s.renderOnCanvas)(p)})),null===(t=a.ui.buttons.generate)||void 0===t||t.click()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUFBZSxDQUN6Q3hFLE1BQU9zSCxPQUFtRCxRQUEzQ3ZILEVBQUtMLEVBQVlmLEdBQUdJLE9BQU9NLGtCQUErQixJQUFQVSxPQUFnQixFQUFTQSxFQUFHNUIsT0FDOUY4QixPQUFRcUgsT0FBb0QsUUFBNUMvQyxFQUFLN0UsRUFBWWYsR0FBR0ksT0FBT08sbUJBQWdDLElBQVBpRixPQUFnQixFQUFTQSxFQUFHcEcsU0FFOUYyRyxFQUFRdUMsRUFBVXhDLFNBQVMsQ0FDN0IzRixnQkFBaUJvSSxPQUF3RCxRQUFoREwsRUFBS3ZILEVBQVlmLEdBQUdJLE9BQU9HLHVCQUFvQyxJQUFQK0gsT0FBZ0IsRUFBU0EsRUFBRzlJLE9BQzdHZ0IsaUJBQWtCbUksT0FBeUQsUUFBakRKLEVBQUt4SCxFQUFZZixHQUFHSSxPQUFPSSx3QkFBcUMsSUFBUCtILE9BQWdCLEVBQVNBLEVBQUcvSSxPQUMvR2lCLHFCQUFzQmtJLE9BQTZELFFBQXJESCxFQUFLekgsRUFBWWYsR0FBR0ksT0FBT0ssNEJBQXlDLElBQVArSCxPQUFnQixFQUFTQSxFQUFHaEosU0FFM0gsSUFBSyxNQUFNLE9BQUVFLEVBQU0sS0FBRUcsS0FBVXNJLEVBQVMxSSxPQUNwQzBHLEVBQU1pQixTQUFTMUgsRUFBUUcsR0FFM0IsTUFBTXNFLEdBQW1ELFFBQTFDc0UsRUFBSzFILEVBQVlmLEdBQUdJLE9BQU9DLGlCQUE4QixJQUFQb0ksT0FBZ0IsRUFBU0EsRUFBR0csY0FBV3hHLEVBQVlnRyxFQUM5R2pILEVBQVF1SCxFQUFVN0gsU0FBU3NELEdBQ2pDaUUsRUFBWWpILEVBQU1nRCxNQUNsQixFQUFJK0QsRUFBU3BILGdCQUFnQkssRUFBTSxJQUVJLFFBQTFDeUUsRUFBSzdFLEVBQVlmLEdBQUdZLFFBQVFDLGdCQUE2QixJQUFQK0UsR0FBeUJBLEVBQUdpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2dlbi1iaW9tZS8uL2RlbW8vc3JjL2Jpb21lcy50cyIsIndlYnBhY2s6Ly9nZW4tYmlvbWUvLi9kZW1vL3NyYy9pbnRlcmZhY2UudHMiLCJ3ZWJwYWNrOi8vZ2VuLWJpb21lLy4vZGVtby9zcmMvcmVuZGVyLnRzIiwid2VicGFjazovL2dlbi1iaW9tZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9nZW4tYmlvbWUvLi9zcmMvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vZ2VuLWJpb21lLy4vc3JjL3V0aWxzL2NsYW1wLnRzIiwid2VicGFjazovL2dlbi1iaW9tZS8uL3NyYy91dGlscy9wZXJsaW4udHMiLCJ3ZWJwYWNrOi8vZ2VuLWJpb21lLy4vc3JjL3dvcmxkLWJpb21lLnRzIiwid2VicGFjazovL2dlbi1iaW9tZS8uL3NyYy93b3JsZC1nZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vZ2VuLWJpb21lLy4vc3JjL3dvcmxkLWxheWVyLnRzIiwid2VicGFjazovL2dlbi1iaW9tZS8uL3NyYy93b3JsZC50cyIsIndlYnBhY2s6Ly9nZW4tYmlvbWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZ2VuLWJpb21lLy4vZGVtby9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJJT01FUyA9IHZvaWQgMDtcbmV4cG9ydHMuQklPTUVTID0gW1xuICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBsb3dlckJvdW5kOiAwLjAsXG4gICAgICAgICAgICB1cHBlckJvdW5kOiAwLjIwLFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiAnV0FURVInLFxuICAgICAgICAgICAgY29sb3I6ICdkb2RnZXJibHVlJyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBsb3dlckJvdW5kOiAwLjIsXG4gICAgICAgICAgICB1cHBlckJvdW5kOiAwLjMsXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6ICdTQU5EJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2VkZDY2NScsXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgbG93ZXJCb3VuZDogMC4zLFxuICAgICAgICAgICAgdXBwZXJCb3VuZDogMC43LFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiAnR1JBU1MnLFxuICAgICAgICAgICAgY29sb3I6ICcjOWJkMTM4JyxcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBsb3dlckJvdW5kOiAwLjcsXG4gICAgICAgICAgICB1cHBlckJvdW5kOiAwLjksXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5hbWU6ICdNT1VOVCcsXG4gICAgICAgICAgICBjb2xvcjogJ2dyYXknLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGxvd2VyQm91bmQ6IDAuOSxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbmFtZTogJ1NOT1cnLFxuICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIH0sXG4gICAgfSxcbl07XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudWkgPSB2b2lkIDA7XG5leHBvcnRzLnVpID0ge1xuICAgIHNjcmVlbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbicpLFxuICAgIGlucHV0czoge1xuICAgICAgICByZXNldFNlZWQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPXJlc2V0U2VlZF0nKSxcbiAgICAgICAgZnJlcXVlbmN5Q2hhbmdlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1mcmVxdWVuY3lDaGFuZ2VdJyksXG4gICAgICAgIGJvcmRlclNtb290aG5lc3M6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPWJvcmRlclNtb290aG5lc3NdJyksXG4gICAgICAgIGhlaWdodFJlZGlzdHJpYnV0aW9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1oZWlnaHRSZWRpc3RyaWJ1dGlvbl0nKSxcbiAgICAgICAgd29ybGRXaWR0aDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9d29ybGRXaWR0aF0nKSxcbiAgICAgICAgd29ybGRIZWlnaHQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPXdvcmxkSGVpZ2h0XScpLFxuICAgIH0sXG4gICAgYnV0dG9uczoge1xuICAgICAgICBnZW5lcmF0ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlJyksXG4gICAgfSxcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVuZGVyT25DYW52YXMgPSB2b2lkIDA7XG5jb25zdCBpbnRlcmZhY2VfMSA9IHJlcXVpcmUoXCIuL2ludGVyZmFjZVwiKTtcbmNvbnN0IGN0eCA9IGludGVyZmFjZV8xLnVpLnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpO1xuY29uc3QgdGlsZVNpemUgPSAyO1xuZnVuY3Rpb24gcmVuZGVyT25DYW52YXMod29ybGQpIHtcbiAgICB2YXIgX2E7XG4gICAgaW50ZXJmYWNlXzEudWkuc2NyZWVuLndpZHRoID0gd29ybGQud2lkdGggKiB0aWxlU2l6ZTtcbiAgICBpbnRlcmZhY2VfMS51aS5zY3JlZW4uaGVpZ2h0ID0gd29ybGQuaGVpZ2h0ICogdGlsZVNpemU7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCB3b3JsZC5oZWlnaHQ7IHkrKykge1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdvcmxkLndpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJpb21lID0gd29ybGQuZ2V0QXQoeyB4LCB5IH0pO1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IChfYSA9IGJpb21lID09PSBudWxsIHx8IGJpb21lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiaW9tZS5jb2xvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJ3B1cnBsZSc7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoeCAqIHRpbGVTaXplLCB5ICogdGlsZVNpemUsIHRpbGVTaXplLCB0aWxlU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLnJlbmRlck9uQ2FudmFzID0gcmVuZGVyT25DYW52YXM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3dvcmxkLWdlbmVyYXRvclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vd29ybGRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNsYW1wID0gdm9pZCAwO1xuZnVuY3Rpb24gY2xhbXAodmFsdWUsIGRlZmF1bHRWYWx1ZSwgbGltaXQgPSBbMCwgMV0pIHtcbiAgICByZXR1cm4gTWF0aC5tYXgobGltaXRbMF0sIE1hdGgubWluKGxpbWl0WzFdLCB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwID8gdmFsdWUgOiBkZWZhdWx0VmFsdWUpKTtcbn1cbmV4cG9ydHMuY2xhbXAgPSBjbGFtcDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZW5lcmF0ZU5vaXNlID0gZXhwb3J0cy5nZW5lcmF0ZVNlZWQgPSB2b2lkIDA7XG5jb25zdCBERUZBVUxUX1BFUkxJTl9TSVpFID0gNDA5NTtcbmNvbnN0IFBFUkxJTl9ZV1JBUEIgPSA0O1xuY29uc3QgUEVSTElOX1lXUkFQID0gMSA8PCBQRVJMSU5fWVdSQVBCO1xuY29uc3QgUEVSTElOX1pXUkFQQiA9IDg7XG5jb25zdCBQRVJMSU5fWldSQVAgPSAxIDw8IFBFUkxJTl9aV1JBUEI7XG5jb25zdCBQRVJMSU5fQU1QX0ZBTExPRkYgPSAwLjU7XG5jb25zdCBQRVJMSU5fQVZHX1BPV0VSID0gMS4xO1xuZnVuY3Rpb24gc2NhbGVkQ29zaW5lKGkpIHtcbiAgICByZXR1cm4gMC41ICogKDEuMCAtIE1hdGguY29zKGkgKiBNYXRoLlBJKSk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVNlZWQoKSB7XG4gICAgY29uc3Qgc2VlZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgREVGQVVMVF9QRVJMSU5fU0laRSArIDE7IGkrKykge1xuICAgICAgICBzZWVkLnB1c2goTWF0aC5yYW5kb20oKSk7XG4gICAgfVxuICAgIHJldHVybiBzZWVkO1xufVxuZXhwb3J0cy5nZW5lcmF0ZVNlZWQgPSBnZW5lcmF0ZVNlZWQ7XG5mdW5jdGlvbiBnZW5lcmF0ZU5vaXNlKHBhcmFtZXRlcnMpIHtcbiAgICBsZXQgeyB4LCB5IH0gPSBwYXJhbWV0ZXJzO1xuICAgIGNvbnN0IHsgc2VlZCwgZnJlcXVlbmN5LCByZWRpc3RyaWJ1dGlvbiwgb2N0YXZlcywgfSA9IHBhcmFtZXRlcnM7XG4gICAgY29uc3QgUEVSTElOX1NJWkUgPSBzZWVkLmxlbmd0aCAtIDE7XG4gICAgeCAqPSBmcmVxdWVuY3k7XG4gICAgeSAqPSBmcmVxdWVuY3k7XG4gICAgbGV0IHhpID0gTWF0aC5mbG9vcih4KTtcbiAgICBsZXQgeWkgPSBNYXRoLmZsb29yKHkpO1xuICAgIGxldCB4ZiA9IHggLSB4aTtcbiAgICBsZXQgeWYgPSB5IC0geWk7XG4gICAgbGV0IHJ4ZjtcbiAgICBsZXQgcnlmO1xuICAgIGxldCByID0gMDtcbiAgICBsZXQgYW1wbCA9IDAuNTtcbiAgICBsZXQgbjE7XG4gICAgbGV0IG4yO1xuICAgIGxldCBuMztcbiAgICBmb3IgKGxldCBvID0gMDsgbyA8IG9jdGF2ZXM7IG8rKykge1xuICAgICAgICBsZXQgb2YgPSB4aSArICh5aSA8PCBQRVJMSU5fWVdSQVBCKTtcbiAgICAgICAgcnhmID0gc2NhbGVkQ29zaW5lKHhmKTtcbiAgICAgICAgcnlmID0gc2NhbGVkQ29zaW5lKHlmKTtcbiAgICAgICAgbjEgPSBzZWVkW29mICYgUEVSTElOX1NJWkVdO1xuICAgICAgICBuMSArPSByeGYgKiAoc2VlZFsob2YgKyAxKSAmIFBFUkxJTl9TSVpFXSAtIG4xKTtcbiAgICAgICAgbjIgPSBzZWVkWyhvZiArIFBFUkxJTl9ZV1JBUCkgJiBQRVJMSU5fU0laRV07XG4gICAgICAgIG4yICs9IHJ4ZiAqIChzZWVkWyhvZiArIFBFUkxJTl9ZV1JBUCArIDEpICYgUEVSTElOX1NJWkVdIC0gbjIpO1xuICAgICAgICBuMSArPSByeWYgKiAobjIgLSBuMSk7XG4gICAgICAgIG9mICs9IFBFUkxJTl9aV1JBUDtcbiAgICAgICAgbjIgPSBzZWVkW29mICYgUEVSTElOX1NJWkVdO1xuICAgICAgICBuMiArPSByeGYgKiAoc2VlZFsob2YgKyAxKSAmIFBFUkxJTl9TSVpFXSAtIG4yKTtcbiAgICAgICAgbjMgPSBzZWVkWyhvZiArIFBFUkxJTl9ZV1JBUCkgJiBQRVJMSU5fU0laRV07XG4gICAgICAgIG4zICs9IHJ4ZiAqIChzZWVkWyhvZiArIFBFUkxJTl9ZV1JBUCArIDEpICYgUEVSTElOX1NJWkVdIC0gbjMpO1xuICAgICAgICBuMiArPSByeWYgKiAobjMgLSBuMik7XG4gICAgICAgIHIgKz0gbjEgKiBhbXBsO1xuICAgICAgICBhbXBsICo9IFBFUkxJTl9BTVBfRkFMTE9GRjtcbiAgICAgICAgeGkgPDw9IDE7XG4gICAgICAgIHhmICo9IDI7XG4gICAgICAgIGlmICh4ZiA+PSAxLjApIHtcbiAgICAgICAgICAgIHhpKys7XG4gICAgICAgICAgICB4Zi0tO1xuICAgICAgICB9XG4gICAgICAgIHlpIDw8PSAxO1xuICAgICAgICB5ZiAqPSAyO1xuICAgICAgICBpZiAoeWYgPj0gMS4wKSB7XG4gICAgICAgICAgICB5aSsrO1xuICAgICAgICAgICAgeWYtLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAociA+IDAuNSkge1xuICAgICAgICByID0gTWF0aC5wb3cociwgKDEuNSAtIHIpIC8gUEVSTElOX0FWR19QT1dFUik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHIgPCAwLjUpIHtcbiAgICAgICAgciA9IE1hdGgucG93KHIsICgxLjUgLSByKSAqIFBFUkxJTl9BVkdfUE9XRVIpO1xuICAgIH1cbiAgICByID0gTWF0aC5wb3cociwgcmVkaXN0cmlidXRpb24pO1xuICAgIHJldHVybiByO1xufVxuZXhwb3J0cy5nZW5lcmF0ZU5vaXNlID0gZ2VuZXJhdGVOb2lzZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Xb3JsZEJpb21lID0gdm9pZCAwO1xuY2xhc3MgV29ybGRCaW9tZSB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zLCBkYXRhKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMubG93ZXJCb3VuZCA9IE1hdGgubWF4KDAsIChfYSA9IHBhcmFtcy5sb3dlckJvdW5kKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwKTtcbiAgICAgICAgdGhpcy51cHBlckJvdW5kID0gTWF0aC5taW4oMSwgKF9iID0gcGFyYW1zLnVwcGVyQm91bmQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDEpO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cbn1cbmV4cG9ydHMuV29ybGRCaW9tZSA9IFdvcmxkQmlvbWU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV29ybGRHZW5lcmF0b3IgPSB2b2lkIDA7XG5jb25zdCBwZXJsaW5fMSA9IHJlcXVpcmUoXCIuL3V0aWxzL3BlcmxpblwiKTtcbmNvbnN0IHdvcmxkXzEgPSByZXF1aXJlKFwiLi93b3JsZFwiKTtcbmNvbnN0IHdvcmxkX2xheWVyXzEgPSByZXF1aXJlKFwiLi93b3JsZC1sYXllclwiKTtcbmNsYXNzIFdvcmxkR2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5sYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHBhcmFtcy53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBwYXJhbXMuaGVpZ2h0O1xuICAgIH1cbiAgICBhZGRMYXllcihwYXJhbXMgPSB7fSkge1xuICAgICAgICBjb25zdCBsYXllciA9IG5ldyB3b3JsZF9sYXllcl8xLldvcmxkTGF5ZXIocGFyYW1zKTtcbiAgICAgICAgdGhpcy5sYXllcnMucHVzaChsYXllcik7XG4gICAgICAgIHJldHVybiBsYXllcjtcbiAgICB9XG4gICAgY2xlYXJMYXllcnMoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzID0gW107XG4gICAgfVxuICAgIGdldExheWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzO1xuICAgIH1cbiAgICBnZW5lcmF0ZShzZWVkKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZWVkID0gc2VlZCAhPT0gbnVsbCAmJiBzZWVkICE9PSB2b2lkIDAgPyBzZWVkIDogKDAsIHBlcmxpbl8xLmdlbmVyYXRlU2VlZCkoKTtcbiAgICAgICAgY29uc3QgbWF0cml4ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbGF5ZXIgb2YgdGhpcy5sYXllcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyTWF0cml4ID0gdGhpcy5nZW5lcmF0ZUxheWVyKGxheWVyLCBjdXJyZW50U2VlZCk7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdHJpeFt5XSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXhbeV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyTWF0cml4W3ldW3hdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbeV1beF0gPSBsYXllck1hdHJpeFt5XVt4XS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0cml4W3ldW3hdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFdvcmxkIG1hdHJpeCBjb250YWlucyBlbXB0eSBiaW9tZSBhdCAke3h9LCR7eX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB3b3JsZF8xLldvcmxkKG1hdHJpeCwgY3VycmVudFNlZWQpO1xuICAgIH1cbiAgICBnZW5lcmF0ZUxheWVyKGxheWVyLCBzZWVkKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGxheWVyLmdldEdlbmVyYXRpb25QYXJhbXMoKTtcbiAgICAgICAgY29uc3QgbWF0cml4ID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgbWF0cml4W3ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9ICgwLCBwZXJsaW5fMS5nZW5lcmF0ZU5vaXNlKShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgc2VlZCwgeDogeCAvIHRoaXMud2lkdGgsIHk6IHkgLyB0aGlzLmhlaWdodCB9KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmlvbWUgPSBsYXllci5nZXRCaW9tZUJ5SGVpZ2h0KGhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKGJpb21lKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeFt5XVt4XSA9IGJpb21lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0cml4O1xuICAgIH1cbn1cbmV4cG9ydHMuV29ybGRHZW5lcmF0b3IgPSBXb3JsZEdlbmVyYXRvcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Xb3JsZExheWVyID0gdm9pZCAwO1xuY29uc3QgY2xhbXBfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL2NsYW1wXCIpO1xuY29uc3Qgd29ybGRfYmlvbWVfMSA9IHJlcXVpcmUoXCIuL3dvcmxkLWJpb21lXCIpO1xuY2xhc3MgV29ybGRMYXllciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zID0ge30pIHtcbiAgICAgICAgdGhpcy5iaW9tZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mcmVxdWVuY3kgPSBNYXRoLnJvdW5kKCgwLCBjbGFtcF8xLmNsYW1wKShwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuZnJlcXVlbmN5Q2hhbmdlLCAwLjMpICogMzEgKyAxKTtcbiAgICAgICAgdGhpcy5vY3RhdmVzID0gTWF0aC5yb3VuZCgoMSAtICgwLCBjbGFtcF8xLmNsYW1wKShwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuYm9yZGVyU21vb3RobmVzcywgMC41KSkgKiAxNCArIDEpO1xuICAgICAgICB0aGlzLnJlZGlzdHJpYnV0aW9uID0gMi4wIC0gKDAsIGNsYW1wXzEuY2xhbXApKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5oZWlnaHRSZWRpc3RyaWJ1dGlvbiwgMS4wLCBbMC41LCAxLjVdKTtcbiAgICB9XG4gICAgYWRkQmlvbWUocGFyYW1zLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IGJpb21lID0gbmV3IHdvcmxkX2Jpb21lXzEuV29ybGRCaW9tZShwYXJhbXMsIGRhdGEpO1xuICAgICAgICB0aGlzLmJpb21lcy5wdXNoKGJpb21lKTtcbiAgICAgICAgcmV0dXJuIGJpb21lO1xuICAgIH1cbiAgICBjbGVhckJpb21lcygpIHtcbiAgICAgICAgdGhpcy5iaW9tZXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0QmlvbWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW9tZXM7XG4gICAgfVxuICAgIGdldEJpb21lQnlIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJpb21lcygpLmZpbmQoKGJpb21lKSA9PiAoaGVpZ2h0ID49IGJpb21lLmxvd2VyQm91bmQgJiYgaGVpZ2h0IDw9IGJpb21lLnVwcGVyQm91bmQpKTtcbiAgICB9XG4gICAgZ2V0R2VuZXJhdGlvblBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyZXF1ZW5jeTogdGhpcy5mcmVxdWVuY3ksXG4gICAgICAgICAgICBvY3RhdmVzOiB0aGlzLm9jdGF2ZXMsXG4gICAgICAgICAgICByZWRpc3RyaWJ1dGlvbjogdGhpcy5yZWRpc3RyaWJ1dGlvbixcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLldvcmxkTGF5ZXIgPSBXb3JsZExheWVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldvcmxkID0gdm9pZCAwO1xuY2xhc3MgV29ybGQge1xuICAgIGNvbnN0cnVjdG9yKG1hdHJpeCwgc2VlZCkge1xuICAgICAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICAgICAgICB0aGlzLndpZHRoID0gbWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBtYXRyaXgubGVuZ3RoO1xuICAgICAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICB9XG4gICAgZ2V0TWF0cml4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7XG4gICAgfVxuICAgIGdldEF0KHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMubWF0cml4W3Bvc2l0aW9uLnldKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbcG9zaXRpb24ueF07XG4gICAgfVxuICAgIHJlcGxhY2VBdChwb3NpdGlvbiwgZGF0YSkge1xuICAgICAgICBpZiAocG9zaXRpb24ueSA+PSB0aGlzLmhlaWdodCB8fCBwb3NpdGlvbi54ID49IHRoaXMud2lkdGgpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdTcGVjaWZpZWQgcG9zaXRpb24gaXMgb3V0IG9mIHdvcmxkIGJvdW5kcycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0cml4W3Bvc2l0aW9uLnldW3Bvc2l0aW9uLnhdID0gZGF0YTtcbiAgICB9XG59XG5leHBvcnRzLldvcmxkID0gV29ybGQ7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX2EsIF9iO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvaW5kZXhcIik7XG5jb25zdCByZW5kZXJfMSA9IHJlcXVpcmUoXCIuL3JlbmRlclwiKTtcbmNvbnN0IGJpb21lc18xID0gcmVxdWlyZShcIi4vYmlvbWVzXCIpO1xuY29uc3QgaW50ZXJmYWNlXzEgPSByZXF1aXJlKFwiLi9pbnRlcmZhY2VcIik7XG5sZXQgc2F2ZWRTZWVkO1xuKF9hID0gaW50ZXJmYWNlXzEudWkuYnV0dG9ucy5nZW5lcmF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIGNvbnN0IGdlbmVyYXRvciA9IG5ldyBpbmRleF8xLldvcmxkR2VuZXJhdG9yKHtcbiAgICAgICAgd2lkdGg6IE51bWJlcigoX2EgPSBpbnRlcmZhY2VfMS51aS5pbnB1dHMud29ybGRXaWR0aCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhbHVlKSxcbiAgICAgICAgaGVpZ2h0OiBOdW1iZXIoKF9iID0gaW50ZXJmYWNlXzEudWkuaW5wdXRzLndvcmxkSGVpZ2h0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudmFsdWUpLFxuICAgIH0pO1xuICAgIGNvbnN0IGxheWVyID0gZ2VuZXJhdG9yLmFkZExheWVyKHtcbiAgICAgICAgZnJlcXVlbmN5Q2hhbmdlOiBOdW1iZXIoKF9jID0gaW50ZXJmYWNlXzEudWkuaW5wdXRzLmZyZXF1ZW5jeUNoYW5nZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnZhbHVlKSxcbiAgICAgICAgYm9yZGVyU21vb3RobmVzczogTnVtYmVyKChfZCA9IGludGVyZmFjZV8xLnVpLmlucHV0cy5ib3JkZXJTbW9vdGhuZXNzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudmFsdWUpLFxuICAgICAgICBoZWlnaHRSZWRpc3RyaWJ1dGlvbjogTnVtYmVyKChfZSA9IGludGVyZmFjZV8xLnVpLmlucHV0cy5oZWlnaHRSZWRpc3RyaWJ1dGlvbikgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnZhbHVlKSxcbiAgICB9KTtcbiAgICBmb3IgKGNvbnN0IHsgcGFyYW1zLCBkYXRhIH0gb2YgYmlvbWVzXzEuQklPTUVTKSB7XG4gICAgICAgIGxheWVyLmFkZEJpb21lKHBhcmFtcywgZGF0YSk7XG4gICAgfVxuICAgIGNvbnN0IHNlZWQgPSAoKF9mID0gaW50ZXJmYWNlXzEudWkuaW5wdXRzLnJlc2V0U2VlZCkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNoZWNrZWQpID8gdW5kZWZpbmVkIDogc2F2ZWRTZWVkO1xuICAgIGNvbnN0IHdvcmxkID0gZ2VuZXJhdG9yLmdlbmVyYXRlKHNlZWQpO1xuICAgIHNhdmVkU2VlZCA9IHdvcmxkLnNlZWQ7XG4gICAgKDAsIHJlbmRlcl8xLnJlbmRlck9uQ2FudmFzKSh3b3JsZCk7XG59KTtcbihfYiA9IGludGVyZmFjZV8xLnVpLmJ1dHRvbnMuZ2VuZXJhdGUpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jbGljaygpO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQklPTUVTIiwicGFyYW1zIiwibG93ZXJCb3VuZCIsInVwcGVyQm91bmQiLCJkYXRhIiwibmFtZSIsImNvbG9yIiwidWkiLCJzY3JlZW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5wdXRzIiwicmVzZXRTZWVkIiwicXVlcnlTZWxlY3RvciIsImZyZXF1ZW5jeUNoYW5nZSIsImJvcmRlclNtb290aG5lc3MiLCJoZWlnaHRSZWRpc3RyaWJ1dGlvbiIsIndvcmxkV2lkdGgiLCJ3b3JsZEhlaWdodCIsImJ1dHRvbnMiLCJnZW5lcmF0ZSIsInJlbmRlck9uQ2FudmFzIiwiaW50ZXJmYWNlXzEiLCJjdHgiLCJnZXRDb250ZXh0IiwidGlsZVNpemUiLCJ3b3JsZCIsIl9hIiwid2lkdGgiLCJoZWlnaHQiLCJ5IiwieCIsImJpb21lIiwiZ2V0QXQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIl9fY3JlYXRlQmluZGluZyIsInRoaXMiLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfX2VzTW9kdWxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19leHBvcnRTdGFyIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNsYW1wIiwiZGVmYXVsdFZhbHVlIiwibGltaXQiLCJNYXRoIiwibWF4IiwibWluIiwiZ2VuZXJhdGVOb2lzZSIsImdlbmVyYXRlU2VlZCIsIkRFRkFVTFRfUEVSTElOX1NJWkUiLCJQRVJMSU5fWVdSQVBCIiwiUEVSTElOX1lXUkFQIiwiUEVSTElOX1pXUkFQIiwiUEVSTElOX0FNUF9GQUxMT0ZGIiwiUEVSTElOX0FWR19QT1dFUiIsInNjYWxlZENvc2luZSIsImkiLCJjb3MiLCJQSSIsInNlZWQiLCJwdXNoIiwicmFuZG9tIiwicGFyYW1ldGVycyIsImZyZXF1ZW5jeSIsInJlZGlzdHJpYnV0aW9uIiwib2N0YXZlcyIsIlBFUkxJTl9TSVpFIiwibGVuZ3RoIiwicnhmIiwicnlmIiwibjEiLCJuMiIsIm4zIiwieGkiLCJmbG9vciIsInlpIiwieGYiLCJ5ZiIsInIiLCJhbXBsIiwib2YiLCJwb3ciLCJXb3JsZEJpb21lIiwiY29uc3RydWN0b3IiLCJfYiIsIldvcmxkR2VuZXJhdG9yIiwicGVybGluXzEiLCJ3b3JsZF8xIiwid29ybGRfbGF5ZXJfMSIsImxheWVycyIsImFkZExheWVyIiwibGF5ZXIiLCJXb3JsZExheWVyIiwiY2xlYXJMYXllcnMiLCJnZXRMYXllcnMiLCJjdXJyZW50U2VlZCIsIm1hdHJpeCIsImxheWVyTWF0cml4IiwiZ2VuZXJhdGVMYXllciIsIkVycm9yIiwiV29ybGQiLCJnZXRHZW5lcmF0aW9uUGFyYW1zIiwiYXNzaWduIiwiZ2V0QmlvbWVCeUhlaWdodCIsImNsYW1wXzEiLCJ3b3JsZF9iaW9tZV8xIiwiYmlvbWVzIiwicm91bmQiLCJhZGRCaW9tZSIsImNsZWFyQmlvbWVzIiwiZ2V0QmlvbWVzIiwiZmluZCIsImdldE1hdHJpeCIsInBvc2l0aW9uIiwicmVwbGFjZUF0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImluZGV4XzEiLCJyZW5kZXJfMSIsImJpb21lc18xIiwic2F2ZWRTZWVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jIiwiX2QiLCJfZSIsIl9mIiwiZ2VuZXJhdG9yIiwiTnVtYmVyIiwiY2hlY2tlZCIsImNsaWNrIl0sInNvdXJjZVJvb3QiOiIifQ==